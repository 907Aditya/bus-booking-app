<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mahi Travels | Cargo Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    body {
      background: #f8f9fa;
    }
    .section-title {
      color: #b31217;
    }
    .form-section {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .form-label {
      font-weight: 500;
    }
    @media print {
      .no-print {
        display: none;
      }
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-white bg-white border-bottom sticky-top shadow-sm" style="padding: 0.25rem 0;">
  <div class="container" style="max-width: 1100px; height: 52px; display: flex; align-items: center;">
    <a class="navbar-brand d-flex align-items-center text-danger fw-bold m-0" href="index.html" style="font-size: 1.35rem; line-height: 1;">
      <img src="https://img.icons8.com/color/48/bus.png" alt="logo" width="24" height="24" class="me-2" style="object-fit: contain;" />
      Mahi Travels
    </a>

    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto gap-1 align-items-center">
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="index.html">üè† Home</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="search.html">üîç Search</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="booking.html">üìÑ Bookings</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="cargo.html">üì¶ Cargo</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="cargo-list.html">üìã Cargo Records</a></li> <!-- ‚úÖ New link -->
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="about.html">‚ÑπÔ∏è About</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="login.html">üë§ Login</a></li>
        <li class="nav-item"><a class="nav-link nav-pill px-2 py-1" href="register.html">üìù Register</a></li>
      </ul>
    </div>
  </div>
</nav>


<div class="container mt-4">
  <h2 class="section-title">Cargo Booking Form</h2>
  <form id="cargoForm">
    <div class="form-section">
      <div class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Activity</label>
          <select class="form-select" name="activity">
            <option selected>Booking</option>
            <option>Delivery</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">From City</label>
          <input type="text" class="form-control" name="from_city" required />
        </div>
        <div class="col-md-3">
          <label class="form-label">To City</label>
          <input type="text" class="form-control" name="to_city" required />
        </div>
        <div class="col-md-3">
          <label class="form-label">Payment Type</label>
          <select class="form-select" name="payment_type">
            <option>Paid</option>
            <option>To-Pay</option>
            <option>FOC</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="row g-4">
        <div class="col-md-6">
          <h5>Sender Info</h5>
          <input type="text" class="form-control mb-2" name="sender_name" placeholder="Sender Name" required />
          <input type="tel" class="form-control mb-2" name="sender_phone" placeholder="Mobile No." required />
          <input type="text" class="form-control" name="sender_location" placeholder="City, State" required />
        </div>
        <div class="col-md-6">
          <h5>Receiver Info</h5>
          <input type="text" class="form-control mb-2" name="receiver_name" placeholder="Receiver Name" required />
          <input type="tel" class="form-control mb-2" name="receiver_phone" placeholder="Mobile No." required />
          <input type="text" class="form-control" name="receiver_location" placeholder="City, State" required />
        </div>
      </div>
    </div>

    <div class="form-section">
      <h5>Goods Details</h5>
      <div id="goodsTable">
        <div class="row g-2 align-items-end mb-2">
          <div class="col-md-2">
            <select class="form-select" name="item[]">
              <option>Box</option>
              <option>Carton</option>
              <option>Suitcase</option>
              <option>Bag</option>
              <option>Big Bag</option>
              <option>Drum</option>
              <option>Packet</option>
              <option>Envelope</option>
              <option>Other</option>
            </select>
          </div>
          <div class="col-md-3"><input class="form-control" name="description[]" placeholder="Description" /></div>
          <div class="col-md-1"><input class="form-control" name="unit[]" placeholder="Unit" /></div>
          <div class="col-md-2"><input class="form-control" name="value[]" placeholder="Value (‚Çπ)" /></div>
          <div class="col-md-2"><input class="form-control" name="weight[]" placeholder="Weight (kg)" /></div>
          <div class="col-md-2"><input class="form-control" name="rate[]" placeholder="Rate (‚Çπ)" /></div>
        </div>
      </div>
      <button class="btn btn-outline-primary mt-2 no-print" type="button" onclick="addRow()">+ Add Row</button>
    </div>

    <div class="form-section">
      <h5>Additional Charges</h5>
      <div class="row g-3">
        <div class="col-md-3"><input class="form-control" name="pickup" placeholder="Pickup Cartage" /></div>
        <div class="col-md-3"><input class="form-control" name="hamali" placeholder="Hamali" /></div>
        <div class="col-md-3"><input class="form-control" name="valuation" placeholder="Valuation" /></div>
        <div class="col-md-3"><input class="form-control" name="doc_fee" placeholder="Doc Fee" /></div>
      </div>
      <div class="d-flex justify-content-end mt-4">
        <button class="btn btn-warning me-2 no-print" type="submit">üì¶ Book Cargo</button>
        <button class="btn btn-success no-print" type="button" onclick="window.print()">üñ®Ô∏è Print/Download</button>
      </div>
    </div>
  </form>
</div>

<script>
  function addRow() {
    const container = document.getElementById("goodsTable");
    const row = document.createElement("div");
    row.className = "row g-2 align-items-end mb-2";
    row.innerHTML = `
      <div class="col-md-2">
        <select class="form-select" name="item[]">
          <option>Box</option>
          <option>Carton</option>
          <option>Suitcase</option>
          <option>Bag</option>
          <option>Big Bag</option>
          <option>Drum</option>
          <option>Packet</option>
          <option>Envelope</option>
          <option>Other</option>
        </select>
      </div>
      <div class="col-md-3"><input class="form-control" name="description[]" placeholder="Description" /></div>
      <div class="col-md-1"><input class="form-control" name="unit[]" placeholder="Unit" /></div>
      <div class="col-md-2"><input class="form-control" name="value[]" placeholder="Value (‚Çπ)" /></div>
      <div class="col-md-2"><input class="form-control" name="weight[]" placeholder="Weight (kg)" /></div>
      <div class="col-md-2"><input class="form-control" name="rate[]" placeholder="Rate (‚Çπ)" /></div>
    `;
    container.appendChild(row);
  }

  document.getElementById("cargoForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());
    try {
      const response = await fetch("http://localhost:8000/cargo/add", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      });
      const result = await response.json();
      alert("‚úÖ Cargo booked successfully!");
      console.log(result);
    } catch (error) {
      alert("‚ùå Error booking cargo");
      console.error(error);
    }
  });
</script>

</body>
</html>
